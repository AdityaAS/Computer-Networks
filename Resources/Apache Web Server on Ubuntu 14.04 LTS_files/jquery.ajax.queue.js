// Copyright (c) 2012 Foliotek Inc.
!function(e){var n={};e.ajaxq=function(t,r){function a(e){n[t]?n[t].push(e):(n[t]=[],e())}function i(){if(n[t]){var e=n[t].shift();e?e():delete n[t]}}if("undefined"==typeof r)throw"AjaxQ: queue name is not provided";var o=e.Deferred(),u=o.promise();u.success=u.done,u.error=u.fail,u.complete=u.always;var f=e.extend(!0,{},r);return a(function(){var n=e.ajax.apply(window,[f]).always(i);n.done(function(){o.resolve.apply(this,arguments)}),n.fail(function(){o.reject.apply(this,arguments)})}),u},e.each(["getq","postq"],function(n,t){e[t]=function(n,r,a,i,o){return e.isFunction(a)&&(o=o||i,i=a,a=void 0),e.ajaxq(n,{type:"postq"===t?"post":"get",url:r,data:a,success:i,dataType:o})}});var t=function(e){return n.hasOwnProperty(e)},r=function(){for(var e in n)if(t(e))return!0;return!1};e.ajaxq.isRunning=function(e){return e?t(e):r()},e.ajaxq.clear=function(e){if(e)n[e]&&delete n[e];else for(var t in n)n.hasOwnProperty(t)&&delete n[t]}}(jQuery);